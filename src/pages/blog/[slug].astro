---
import { Image } from 'astro:assets';
import {getCollection, CollectionEntry} from "astro:content";
import Layout from '../../layouts/Layout.astro';

export const getStaticPaths = async () => {
    const posts = await getCollection("posts");
    const paths = posts.map(post => {
        return {
            params: {
                slug: post.slug
            },
            props: {post}
        }
    })
    return paths;
}

type Props = {
    post: CollectionEntry<"posts">
}

const {post} = Astro.props;
const {Content} = await post.render();
---

<Layout title={post.data.title}>
    <main class="px-24 max-w-7xl mx-auto w-full max-sm-24">
		<h1 class="text-4xl text-white mb-6">{post.data.title}</h1>
        <Image 
            src={post.data.image}
            width={1200}
            height={1200 / 1.5}
            alt={post.data.title}
            class="rounded shadow-xl mt-6 mb-6 aspect-thumbnail object-cover"
        />
        <div class="prose prose-xl prose-zinc dark:prose-invert overflow-visible relative mb-20">
            <Content />
        </div>
	</main>
</Layout>
